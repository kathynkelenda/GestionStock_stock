{% extends 'base.html.twig' %}

{% block title %}
    TOUS LES PRODUITS
{% endblock %}


{% block body %}

    <h2 class="text-center">GERER VOTRE STOCK</h2> <br><br>

    <div class="lead">
        {% if is_granted('ROLE_PRODUCT') == false and is_granted('ROLE_ADMIN') == false %}
        
            <p class="text-center"> Bienvenue sur votre plateforme de gestion de stock. Vous pourrez ici obtenir des informations sur
                les produits ainsi qu'à leurs nature.</p>
        
        {% endif %}

        {% if is_granted('ROLE_ADMIN') %}
            <p class="text-center">  Bienvenue sur votre plateforme de gestion de stock. Vous pouvez gerer vos produits, leurs natures
                ainsi que les utilisateurs de cette plateforme.</p>  

        {% elseif is_granted('ROLE_PRODUCT') %}
                <p class="text-center">
                    Bienvenue sur votre plateforme de gestion de stock. Vous pouvez consulter vos produits, les gerer administrateur
                    qu'y porter ds modification si vous le souhaiter.
                </p>
        {% endif %}
    
    </div> <br>
    <main>
        <div class="container mt-4">

            <div class="text-center">

                <h3 > <U>Liste des produits</U> </h3> 

                <td>
                    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        <a href=" {{path('product.new')}}" class="btn btn-success"> Enrégistrer un nouveau produit</a>
                    </font>
        
                <td> 
            </div> <br><br>

            <table class="table table-hover">  
                    <thead>
                        <tr class="table-dark">
                            
                            <th scope="col">NOM</th>
                            <th scope="col">PRIX</th>
                            <th scope="col">EN STOCK</th>
                            <th scope="col">NATURE</th>
                            <th scope="col">VOIR</th>

                            {% if is_granted('ROLE_ADMIN') %}
                                <th scope="col">MODIFIER</th>
                                <th scope="col">SUPPRIMER</th>
                            {% endif %}
                           
                        </tr>
                    </thead>


                <tbody>
                    {% for prod in product %}
                    
                            <tr class="table-secondary">
                            
                            
                            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{{prod.nameProduct}}</font></font></td>
                            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{{prod.priceProduct}}</font></font></td>
                            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{{prod.quantityProduct}}</font></font></td>
                            <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{{prod.ToPossess.nameNature}}</font></font></td>
                            
                            
                            <td>
                                <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                                    <a href=" {{path('product.show', {"id": prod.id})}}" class="btn btn-success"> 
                                        Voir
                                    </a>
                                </font>
                            
                        {% if is_granted('ROLE_ADMIN') %}
                            <td>
                                <a href="{{path('product.edit',{"id": prod.id})}}" class="btn btn-info">  
                                    Modifier
                                </a>
                            </td>

                            <td>
                                <a href="{{path('product.delete',{"id": prod.id})}}" class="btn btn-warning" onclick="return confirm('Voulez-vous supprimer cet article?')">
                                    Supprimer
                                </a>
                            </td>
                            </tr>
                        {% endif %}

                    {% else %}

                            <label>
                                Aucun produit enregistré à ce jour.
                            </label>

                    {% endfor %}
                    
                </tbody>
        </table>
        </div>        
                 
    </main>
    
{% endblock body %}

